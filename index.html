<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Descent ‚Äî Roguelike Dungeon Crawler</title>
    <meta name="description"
        content="A web-based roguelike dungeon crawler with POE-style passive skill tree, procedural dungeons, and turn-based combat. Rendered in 3D pixel art with Three.js.">
    <link rel="stylesheet" href="css/style.css">
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>

<body>
    <!-- 3D Game Container -->
    <div id="game-container"></div>

    <!-- Skill Tree Canvas (2D Overlay) -->
    <canvas id="skilltree-canvas"></canvas>

    <!-- HUD (Top Bar) -->
    <div id="hud">
        <span id="level-text">LV 1</span>
        <span id="floor-text">Floor 1 / 5</span>

        <div class="bar-group">
            <span class="bar-label">HP</span>
            <div class="bar-container">
                <div class="bar-fill hp-fill" id="hp-bar" style="width: 100%"></div>
                <span class="bar-text" id="hp-text">100 / 100</span>
            </div>
        </div>

        <div class="bar-group">
            <span class="bar-label">MP</span>
            <div class="bar-container">
                <div class="bar-fill mp-fill" id="mp-bar" style="width: 100%"></div>
                <span class="bar-text" id="mp-text">50 / 50</span>
            </div>
        </div>

        <div class="bar-group">
            <span class="bar-label">XP</span>
            <div class="bar-container">
                <div class="bar-fill xp-fill" id="xp-bar" style="width: 0%"></div>
                <span class="bar-text" id="xp-text">0 / 50</span>
            </div>
        </div>

        <span id="skill-points-text" class="skill-points"></span>
    </div>

    <!-- Side Panel (Right) -->
    <div id="side-panel">
        <!-- Stats -->
        <div class="panel">
            <div class="panel-title">‚öîÔ∏è Stats</div>
            <div id="stats-panel"></div>
        </div>

        <!-- Equipment -->
        <div class="panel">
            <div class="panel-title">üõ°Ô∏è Equipment</div>
            <div id="equipment-panel"></div>
        </div>

        <!-- Inventory -->
        <div class="panel">
            <div class="panel-title">üéí Inventory (click to use/equip)</div>
            <div id="inventory-panel"></div>
        </div>

        <div id="controls-hint">
            <div class="key-hint"><span>W</span><span>A</span><span>S</span><span>D</span> Move</div>
            <div class="key-hint"><span>L-Click</span> Attack</div>
            <div class="key-hint"><span>Q</span><span>E</span> Skills</div>
            <div class="key-hint"><span>T</span> Skill Tree</div>
            <div class="key-hint"><span>SHIFT</span>+Click Drop</div>
            <div class="key-hint"><span>F</span> Pickup</div>
        </div>
        <button id="btn-promote" class="hud-btn" style="display: none;">Promote Class ‚ú®</button>

        <!-- Combat Log -->
        <div class="panel">
            <div class="panel-title">üìú Combat Log</div>
            <div id="combat-log"></div>
        </div>
    </div>

    <!-- Skill Bar -->
    <div id="skill-bar"></div>

    <div id="controls-hint">
        WASD: Move &nbsp;|&nbsp; Click: Attack &nbsp;|&nbsp; Q / E: Skills &nbsp;|&nbsp; [T] Skill Tree
    </div>

    <!-- ===== SCREENS ===== -->

    <!-- Menu Screen (Class Selection) -->
    <div class="screen active" id="menu-screen">
        <div class="menu-title">‚öîÔ∏è Dark Descent</div>
        <div class="menu-subtitle">CHOOSE YOUR CLASS</div>
        <div class="class-select">
            <button class="class-btn" data-class="warrior" style="--cls-color: #e74c3c;">
                <span class="class-icon">‚öîÔ∏è</span>
                <span class="class-name">Warrior</span>
                <span class="class-desc">‡∏ñ‡∏∂‡∏Å ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô ‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡πÅ‡∏£‡∏á</span>
                <span class="class-stats">HP 140 | STR 16 | Armor 4</span>
            </button>
            <button class="class-btn" data-class="rogue" style="--cls-color: #2ecc71;">
                <span class="class-icon">üó°Ô∏è</span>
                <span class="class-name">Rogue</span>
                <span class="class-desc">‡πÄ‡∏£‡πá‡∏ß ‡∏Ñ‡∏£‡∏¥‡∏ï‡∏¥‡∏Ñ‡∏≠‡∏•‡∏™‡∏π‡∏á ‡∏´‡∏•‡∏ö‡πÄ‡∏Å‡πà‡∏á</span>
                <span class="class-stats">SPD ‚òÖ‚òÖ | Crit 15% | Dodge 12</span>
            </button>
            <button class="class-btn" data-class="mage" style="--cls-color: #3498db;">
                <span class="class-icon">üîÆ</span>
                <span class="class-name">Mage</span>
                <span class="class-desc">‡∏û‡∏•‡∏±‡∏á‡πÄ‡∏ß‡∏ó ‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡πÑ‡∏Å‡∏• ‡πÄ‡∏õ‡∏£‡∏≤‡∏∞‡∏ö‡∏≤‡∏á</span>
                <span class="class-stats">Range ‚òÖ‚òÖ | INT 18 | MP 100</span>
            </button>
        </div>
        <div class="menu-controls">
            Click to attack &bull; WASD to move &bull; [T] Skill Tree
        </div>
    </div>

    <!-- Death Screen -->
    <div class="screen" id="death-screen">
        <div class="death-title">‚ò†Ô∏è YOU DIED</div>
        <div class="death-subtitle">The dungeon claims another soul...</div>
        <div id="death-stats"></div>
        <button class="btn" id="btn-restart">TRY AGAIN</button>
    </div>

    <!-- Victory Screen -->
    <div class="screen" id="victory-screen">
        <div class="victory-title">üèÜ VICTORY!</div>
        <div class="death-subtitle">You conquered the dungeon!</div>
        <div id="victory-stats"></div>
        <button class="btn" id="btn-restart-victory">PLAY AGAIN</button>
    </div>

    <!-- Inventory Screen (New) -->
    <div id="inventory-modal" class="modal-overlay" style="display: none;">
        <div class="inventory-window">
            <div class="inv-header">
                <h2>INVENTORY</h2>
                <button class="close-btn" id="btn-close-inv">√ó</button>
            </div>
            <div class="inv-body">
                <!-- Left: Character Preview -->
                <div class="inv-section char-section">
                    <div class="char-preview-container">
                        <canvas id="char-preview-canvas" width="200" height="300"></canvas>
                    </div>
                </div>

                <!-- Center: Equipment -->
                <div class="inv-section equip-section">
                    <h3>EQUIPMENT</h3>
                    <div class="equip-grid" id="modal-equipment">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Right: Inventory Grid -->
                <div class="inv-section bag-section">
                    <h3>BAG</h3>
                    <div class="bag-grid" id="modal-inventory">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Bottom: Detailed Stats -->
            <div class="inv-footer">
                <div class="stats-grid" id="modal-stats">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts (order matters) -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/dungeon.js"></script>
    <script src="js/items.js"></script>
    <script src="js/player.js"></script>
    <script src="js/enemy.js"></script>
    <script src="js/combat.js"></script>
    <script src="js/inventory.js"></script>
    <script src="js/skilltree-data.js"></script>
    <script src="js/skilltree.js"></script>
    <script src="js/skilltree-ui.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
</body>

</html>